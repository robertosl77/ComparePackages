<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Comparativa de Packages</title>
    <style>
        .red { color: red; }
        .yellow { color: yellow; }
        .green { color: green; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
    </style>
</head>
<body>
    <h1>Comparativa de Packages - {{ origen }}</h1>
    
    <h2>Query Nuevo</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Documento</th>
            <th>ObjectID</th>
            <th>CT</th>
            <th>Afectados</th>
            <th>Status</th>
        </tr>
        {% for row in nuevo_data %}
        <tr>
            <td>{{ row.id }}</td>
            <td class="{% if 'documento' in row.differences %}yellow{% endif %}">{{ row.documento }}</td>
            <td class="{% if 'objectid' in row.differences %}yellow{% endif %}">{{ row.objectid }}</td>
            <td class="{% if 'ct' in row.differences %}yellow{% endif %}">{{ row.ct }}</td>
            <td class="{% if 'afectados' in row.differences %}yellow{% endif %}">{{ row.afectados }}</td>
            <td class="{{ row.status }}">{{ row.status }}</td>
        </tr>
        {% endfor %}
    </table>
    
    <h2>Query Viejo (No coincidentes)</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Documento</th>
            <th>ObjectID</th>
            <th>CT</th>
            <th>Afectados</th>
        </tr>
        {% for row in viejo_only %}
        <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.documento }}</td>
            <td>{{ row.objectid }}</td>
            <td>{{ row.ct }}</td>
            <td>{{ row.afectados }}</td>
        </tr>
        {% endfor %}
    </table>
    
    <h2>Resumen</h2>
    <p>CT Nuevo: {{ summary.nuevo_ct }}</p>
    <p>Afectados Nuevo: {{ summary.nuevo_afectados }}</p>
    <p>CT Viejo: {{ summary.viejo_ct }}</p>
    <p>Afectados Viejo: {{ summary.viejo_afectados }}</p>
</body>
</html>
